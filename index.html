<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sandra & Harmon - Wedding</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="site.webmanifest">
    <!-- Google Forms Integration -->
    <!-- SEO & Social -->
    <meta name="description" content="Sandra & Harmon are getting married on January 28, 2026 in Cabuyao City, Philippines. RSVP, view schedule, locations, and photos.">
    <meta property="og:title" content="Sandra & Harmon - Wedding">
    <meta property="og:description" content="RSVP and find details for Sandra & Harmon's wedding.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="images/sands.jpg">
    <link rel="icon" href="images/sands.jpg">
</head>
<body>
    <!-- Header & Navigation -->
    <header>
        <nav class="navbar" aria-label="Primary">
            <div class="nav-brand">
                <span class="initials">H & S</span>
            </div>
            <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            <ul class="nav-links">
                <li><a href="#story" class="nav-link">Our Story</a></li>
                <li><a href="#wedding" class="nav-link">The Wedding</a></li>
                <li><a href="#schedule" class="nav-link">Schedule</a></li>
                <li><a href="#accommodations" class="nav-link">Accommodations</a></li>
                <li><a href="#rsvp" class="nav-link">RSVP</a></li>
                <li><a href="#gallery" class="nav-link">Gallery</a></li>
                <li><a href="#faq" class="nav-link">FAQ</a></li>
                <li><a href="#gift" class="nav-link">Gift</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home" aria-label="Home">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">Sandra & Harmon</h1>
            <h2 class="hero-subtitle">ARE GETTING MARRIED</h2>
            <div class="hero-details">
                <p class="hero-date">JANUARY 28, 2026</p>
                <p class="hero-location">2:00 PM CEREMONY</p>
                <p class="hero-location">CABUYAO CITY, PHILIPPINES</p>
            </div>
            
            <!-- Countdown Clock -->
            <div class="countdown-container">
                <div class="countdown-item">
                    <span class="countdown-number" id="days">000</span>
                    <span class="countdown-label">Days</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="hours">00</span>
                    <span class="countdown-label">Hours</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="minutes">00</span>
                    <span class="countdown-label">Minutes</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="seconds">00</span>
                    <span class="countdown-label">Seconds</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Schedule Section -->
    <section id="schedule" class="schedule-section reveal" aria-label="Schedule">
        <div class="container">
            <h2 class="section-title">Wedding Day Schedule</h2>
            <ol class="timeline">
                <li class="timeline-item"><span class="time">1:15 PM</span><span class="event">Guest Arrival & Seating</span></li>
                <li class="timeline-item"><span class="time">2:00 PM</span><span class="event">Ceremony Begins</span></li>
                <li class="timeline-item"><span class="time">3:00 PM</span><span class="event">Photos & Cocktail Hour</span></li>
                <li class="timeline-item"><span class="time">5:00 PM</span><span class="event">Reception & Dinner</span></li>
                <li class="timeline-item"><span class="time">7:30 PM</span><span class="event">Toasts & First Dance</span></li>
                <li class="timeline-item"><span class="time">9:30 PM</span><span class="event">Send-off</span></li>
            </ol>
        </div>
    </section>


    <!-- Accommodations Section -->
    <section id="accommodations" class="accommodations-section reveal" aria-label="Accommodations">
        <div class="container">
            <h2 class="section-title">Accommodations</h2>
            <div class="accommodations-grid">
                <div class="hotel-card">
                    <h3 class="hotel-name">Seda Nuvali</h3>
                    <p class="hotel-distance">~10 minutes from ceremony</p>
                    <a class="hotel-link" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=Seda%20Nuvali">View on Google Maps</a>
                </div>
                <div class="hotel-card">
                    <h3 class="hotel-name">The Lake Hotel Tagaytay</h3>
                    <p class="hotel-distance">~35 minutes from reception</p>
                    <a class="hotel-link" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=The%20Lake%20Hotel%20Tagaytay">View on Google Maps</a>
                </div>
                <div class="hotel-card">
                    <h3 class="hotel-name">Microtel by Wyndham South Forbes</h3>
                    <p class="hotel-distance">~25 minutes from ceremony</p>
                    <a class="hotel-link" target="_blank" rel="noopener" href="https://www.google.com/maps/search/?api=1&query=Microtel%20South%20Forbes">View on Google Maps</a>
                </div>
            </div>
            <p class="accommodations-note">Tip: Book early for the best rates and availability.</p>
        </div>
    </section>
    <!-- Our Story Section -->
    <section id="story" class="story-section reveal" aria-label="Our Story">
        <div class="container">
            <h2 class="section-title">Our Story</h2>
            <div class="story-content">
                <div class="story-image">
                    <img src="images/sands.jpg" alt="Sandra and Harmon" class="story-photo" loading="lazy" decoding="async">
                </div>
                <div class="story-text">
                    <p>Our love story began in the most unexpected way...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- The Wedding Section -->
    <section id="wedding" class="wedding-section reveal" aria-label="The Wedding">
        <div class="container">
            <h2 class="section-title">The Wedding</h2>
            <div class="wedding-events">
                <!-- Ceremony -->
                <div class="event-card ceremony">
                    <img class="event-photo" src="images/church.jpg" alt="Ceremony location">
                    <div class="event-card-content">
                        <h3 class="event-title">The Ceremony</h3>
                        <div class="event-details">
                            <div class="event-info">
                                <p class="event-time"><strong>Time:</strong> 2:00 PM</p>
                                <p class="event-location"><strong>Location:</strong> Montecito, Nuvali</p>
                                <p class="event-address">Cabuyao City, Philippines</p>
                            </div>
                            <a class="location-button" target="_blank" rel="noopener" href="https://maps.google.com/?q=Montecito%20Nuvali%20Cabuyao%20City%20Philippines">
                                <span class="button-icon">üìç</span>
                                <span class="button-text">Open in Google Maps</span>
                            </a>
                            <div class="calendar-buttons">
                                <a class="location-button" target="_blank" rel="noopener" href="https://www.google.com/calendar/render?action=TEMPLATE&text=Sandra%20%26%20Harmon%20Ceremony&dates=20260128T060000Z/20260128T073000Z&details=Wedding%20Ceremony&location=Montecito%2C%20Nuvali%2C%20Cabuyao%20City%2C%20Philippines">
                                    <span class="button-icon">üóìÔ∏è</span>
                                    <span class="button-text">Add to Google</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reception -->
                <div class="event-card reception">
                    <img class="event-photo" src="images/reception.jpg" alt="Reception venue">
                    <div class="event-card-content">
                        <h3 class="event-title">The Reception</h3>
                        <div class="event-details">
                            <div class="event-info">
                                <p class="event-time"><strong>Time:</strong> After Ceremony</p>
                                <p class="event-location"><strong>Location:</strong> Lakehall, Nena's Sanctuary</p>
                                <p class="event-address">Sta. Elena, Cabuyao City, Philippines</p>
                            </div>
                            <a class="location-button" target="_blank" rel="noopener" href="https://maps.google.com/?q=Lakehall%20Nena's%20Sanctuary%20Sta.%20Elena%20Cabuyao%20City%20Philippines">
                                <span class="button-icon">üìç</span>
                                <span class="button-text">Open in Google Maps</span>
                            </a>
                            <div class="calendar-buttons">
                                <a class="location-button" target="_blank" rel="noopener" href="https://www.google.com/calendar/render?action=TEMPLATE&text=Sandra%20%26%20Harmon%20Reception&dates=20260128T090000Z/20260128T130000Z&details=Wedding%20Reception&location=Lakehall%2C%20Nena's%20Sanctuary%2C%20Sta.%20Elena%2C%20Cabuyao%20City%2C%20Philippines">
                                    <span class="button-icon">üóìÔ∏è</span>
                                    <span class="button-text">Add to Google</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- RSVP Section -->
    <section id="rsvp" class="rsvp-section reveal" aria-label="RSVP">
        <div class="container">
            <h2 class="section-title">Kindly Respond By December 1st</h2>
            <form class="rsvp-form" id="rsvp-form" action="https://docs.google.com/forms/d/e/1FAIpQLSen6cQc5eLPjLnEKOaLcztdfaStOCr_5bTKlixXAkNNs27xBg/formResponse" method="POST" target="hidden_iframe">
                <div class="form-group">
                    <label for="name">First & Last Name</label>
                    <input type="text" id="name" name="entry.671845706" required aria-invalid="false">
                    <small class="field-error" id="error-name" hidden>Please enter your first and last name.</small>
                </div>
                <!-- Honeypot anti-spam field (hidden from users) -->
                <div class="form-group" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">
                    <label for="confirm_email">Confirm Email</label>
                    <input type="text" id="confirm_email" name="confirm_email" tabindex="-1" autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="entry.123456789" required aria-invalid="false">
                    <small class="field-error" id="error-email" hidden>Please enter a valid email address.</small>
                </div>
                <div class="form-group">
                    <label for="guests">Number of Guests</label>
                    <select id="guests" name="entry.1893890701" required aria-invalid="false">
                        <option value="">Select number of guests</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                    <small class="field-error" id="error-guests" hidden>Please select the number of guests.</small>
                </div>
                <div class="form-group attendance-question">
                    <label>Will you be attending?</label>
                    <div class="radio-group">
                        <label class="radio-label" data-emoji="üòä">
                            <input type="radio" name="entry.1485655847" value="YES" required>
                            <span class="radio-custom"></span>
                            <span class="radio-text">Will Attend</span>
                            <span class="emoji-feedback">üòä</span>
                        </label>
                        <label class="radio-label" data-emoji="üò¢">
                            <input type="radio" name="entry.1485655847" value="NO" required>
                            <span class="radio-custom"></span>
                            <span class="radio-text">Regretfully Declines</span>
                            <span class="emoji-feedback">üò¢</span>
                        </label>
                    </div>
                </div>
                <button type="submit" class="btn submit-btn">
                    <span class="btn-text">Submit RSVP</span>
                    <span class="btn-emoji">üíå</span>
                </button>
                <p class="form-success" aria-live="polite" hidden>
                    <span class="success-emoji">üéâ</span>
                    Thank you for your response! We look forward to celebrating with you.
                </p>
                <p class="form-error" aria-live="polite" hidden>
                    <span class="error-emoji">‚ö†Ô∏è</span>
                    Please fill in all required fields before submitting.
                </p>
            </form>
            <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
        </div>
    </section>

    <!-- Registry Section -->
    <section id="registry" class="registry-section">
        <div class="container">
            <!-- Any registry content here -->
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="gallery-section reveal" aria-label="Photo Gallery">
        <div class="container">
            <h2 class="section-title">Photo Gallery</h2>
            <div class="gallery-grid">
                <figure class="gallery-item"><img src="images/couple-indoor-selfie.jpg" alt="Sandra and Harmon - Indoor selfie" loading="lazy" decoding="async" /></figure>
                <figure class="gallery-item"><img src="images/couple-formal-portrait.jpg" alt="Sandra and Harmon - Formal portrait" loading="lazy" decoding="async" /></figure>
                <figure class="gallery-item"><img src="images/couple-boat-selfie.jpg" alt="Sandra and Harmon - Boat adventure" loading="lazy" decoding="async" /></figure>
                <figure class="gallery-item"><img src="images/couple-restaurant-dining.jpg" alt="Sandra and Harmon - Dining together" loading="lazy" decoding="async" /></figure>
                <figure class="gallery-item"><img src="images/couple-autumn-bridge.jpg" alt="Sandra and Harmon - Autumn bridge" loading="lazy" decoding="async" /></figure>
                <figure class="gallery-item"><img src="images/sands.jpg" alt="Sandra and Harmon - Special moment" loading="lazy" decoding="async" /></figure>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="faq-section reveal" aria-label="FAQ">
        <div class="container">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <div class="faq">
                <button class="faq-item" aria-expanded="false"><span>Can We Take Photos or Videos During the Ceremony?</span><span class="faq-icon">+</span></button>
                <div class="faq-content" hidden>
                    <p>We believe that photos have the power to preserve love in its purest form‚Äî and for this reason, we've entrusted a team of professional photographers and videographers to beautifully capture our most cherished moments.</p>
                    <p>üì∏ <strong>Yes, you may take photos during the procession, but kindly stay out of the way of our official photo & video team.</strong></p>
                    <p>üôèüèº <strong>We are having an unplugged ceremony.</strong><br>
                    We lovingly ask that you put away your phones and cameras once the ceremony begins. Be fully present with us as we exchange vows, surrounded by grace and love. Let's allow our professionals to do what they do best‚Äî so you can simply soak in the moment with your hearts wide open. üíí</p>
                    <p><strong>After the Ceremony</strong><br>
                    Please don't head out just yet‚Äîwe'd love to capture more memories with you!<br>
                    Our coordinators will gently call guests by groups for a pictorial session right after the ceremony.</p>
                    <p>We also have a Photoman who will be roaming and capturing candid moments and portraits of our beloved guests.<br>
                    Smile, celebrate, and let love shine through the lens.</p>
                    <p><strong>Help Us Capture the Joy!</strong><br>
                    Once the ceremony is done, feel free to take as many photos as you wish.<br>
                    üì§ Share them with us using the QR code provided at the reception or tag them with our hashtags:<br>
                    <strong>#GodsReMARKableGiftToMARIA</strong><br>
                    <strong>#ALLANAIbaParaKayRENZO</strong></p>
                </div>

                <button class="faq-item" aria-expanded="false"><span>I already RSVP'd "YES" but something came up and I can no longer attend. What should I do?</span><span class="faq-icon">+</span></button>
                <div class="faq-content" hidden>
                    <p>We completely understand that plans can change.<br>
                    Please inform us as soon as possible so we can kindly reallocate your seats.</p>
                </div>

                <button class="faq-item" aria-expanded="false"><span>I can attend the ceremony, but I won't be able to stay for the reception.</span><span class="faq-icon">+</span></button>
                <div class="faq-content" hidden>
                    <p>That's perfectly okay‚Äîjust let us know ahead of time so we can adjust accordingly.</p>
                </div>

                <button class="faq-item" aria-expanded="false"><span>I previously said "no" on the RSVP, but now I'm available. Can I still attend?</span><span class="faq-icon">+</span></button>
                <div class="faq-content" hidden>
                    <p>We deeply appreciate your change of heart.<br>
                    However, we have already finalized the seating and given your spot to another guest.<br>
                    Thank you for understanding.</p>
                </div>

                <button class="faq-item" aria-expanded="false"><span>Can I bring someone with me?</span><span class="faq-icon">+</span></button>
                <div class="faq-content" hidden>
                    <p>As much as we would love to celebrate with everyone, we have a limited number of seats and can only accommodate those explicitly invited.<br>
                    We kindly ask for your understanding.</p>
                </div>

                <button class="faq-item" aria-expanded="false"><span>Are kids allowed?</span><span class="faq-icon">+</span></button>
                <div class="faq-content" hidden>
                    <p>We adore children! üíï<br>
                    However, only kids who are part of the entourage or from immediate families are included in the ceremony and reception.</p>
                </div>

                <button class="faq-item" aria-expanded="false"><span>Can We Sit Anywhere During the Reception?</span><span class="faq-icon">+</span></button>
                <div class="faq-content" hidden>
                    <p>To make sure everyone is comfortably accommodated, please check the seating chart at the registration table.<br>
                    Our lovely coordinators will be happy to assist you in finding your designated seat.</p>
                </div>

                <button class="faq-item" aria-expanded="false"><span>Will There Be a Mobile Bar?</span><span class="faq-icon">+</span></button>
                <div class="faq-content" hidden>
                    <p>Absolutely! The drinks are on us, so raise a glass and celebrate!<br>
                    We just ask that you drink responsibly and make it home safely.</p>
                </div>

                <button class="faq-item" aria-expanded="false"><span>How Can We Help the Couple Have Their Best Time?</span><span class="faq-icon">+</span></button>
                <div class="faq-content" hidden>
                    <p>üôèüèº Pray with us for favor, joy, and grace throughout the day<br>
                    üì© RSVP on time so we can plan joyfully and thoughtfully<br>
                    üëó Wear attire that fits the occasion (no white, no dark tones)<br>
                    ‚è± Arrive on time and allow space for meaningful moments<br>
                    üéâ Celebrate with us until the end‚Äîevery moment matters<br>
                    üíÉ Relax, have fun, and party with the ones you love!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Gift Section -->
    <section id="gift" class="gift-section reveal" aria-label="Gift">
        <div class="container">
            <h2 class="section-title">Gift</h2>
            <div class="gift-content">
                <p class="gift-message">The greatest gift you can give us is your presence at our wedding, but if you must, provided below are options to help us fund our future together.</p>
                
                <div class="gift-options">
                    <div class="bank-option">
                        <h3 class="bank-name">BDO</h3>
                        <p class="account-name">Sandra & Harmon</p>
                        <p class="account-number">1234567890</p>
                    </div>
                    
                    <div class="bank-option">
                        <h3 class="bank-name">BPI</h3>
                        <p class="account-name">Sandra & Harmon</p>
                        <p class="account-number">9876543210</p>
                    </div>
                    
                    <div class="bank-option">
                        <h3 class="bank-name">GCash</h3>
                        <p class="account-name">Sandra & Harmon</p>
                        <p class="account-number">09123456789</p>
                    </div>
                </div>
                
                <p class="gift-note">üíù Your presence is the greatest gift, but monetary contributions to help us start our new journey together will be greatly valued.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p class="footer-text">Made with love for Sandra & Harmon | 2026</p>
    </footer>

    <!-- Lightbox Modal & Back To Top -->
    <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="Image preview">
        <button class="lightbox-close" aria-label="Close">√ó</button>
        <img src="" alt="Gallery preview" class="lightbox-img" />
    </div>
    <button class="back-to-top" aria-label="Back to top">‚Üë</button>
    <!-- RSVP Success Modal -->
    <div class="modal" id="rsvp-modal" aria-hidden="true" role="dialog" aria-labelledby="rsvp-modal-title">
        <div class="modal-dialog">
            <h3 class="modal-title" id="rsvp-modal-title">RSVP Submitted üéâ</h3>
            <p class="modal-body">Thank you! Your response has been recorded. We can‚Äôt wait to celebrate with you.</p>
            <button class="btn modal-close" id="rsvp-modal-close" aria-label="Close modal">Close</button>
        </div>
    </div>
    <div class="sticky-rsvp"><a href="#rsvp" class="btn">RSVP</a></div>
    
    <!-- Music Toggle -->
    <audio id="bg-audio" loop preload="auto" playsinline>
        <!-- Multiple audio sources for better browser compatibility -->
        <source src="audio/wedding-theme.mp3" type="audio/mpeg">
        <source src="audio/cant help falling.mp3" type="audio/mpeg">
        <!-- Fallback message for browsers that don't support audio -->
        Your browser does not support the audio element.
    </audio>
    <button class="music-toggle" id="music-toggle" aria-label="Toggle music" aria-pressed="false">‚ô™</button>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add scroll offset for sticky navbar using scroll-margin
        const navHeight = 80;
        document.querySelectorAll('section').forEach(sec => {
            sec.style.scrollMarginTop = navHeight + 'px';
        });

        // Active nav highlight on scroll
        const navMap = Array.from(document.querySelectorAll('.nav-link'))
            .map(link => ({ link, target: document.querySelector(link.getAttribute('href')) }))
            .filter(x => x.target);
        const activeObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const item = navMap.find(x => x.target === entry.target);
                if (!item) return;
                if (entry.isIntersecting) {
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    item.link.classList.add('active');
                }
            });
        }, { rootMargin: '-40% 0px -55% 0px', threshold: 0.01 });
        navMap.forEach(x => activeObserver.observe(x.target));

        // Animated navbar on scroll + subtle parallax
        const navbar = document.querySelector('.navbar');
        const hero = document.querySelector('.hero');
        const handleScroll = () => {
            if (window.scrollY > 10) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
            const offset = window.scrollY * 0.2;
            hero.style.backgroundPosition = `center calc(50% + ${offset}px)`;
        };
        window.addEventListener('scroll', handleScroll, { passive: true });
        handleScroll();

        // Reveal on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.15 });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // Back to top
        const backToTop = document.querySelector('.back-to-top');
        window.addEventListener('scroll', () => {
            backToTop.classList.toggle('visible', window.scrollY > 400);
        }, { passive: true });
        backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Countdown Clock
        function updateCountdown() {
            const weddingDate = new Date('January 28, 2026 14:00:00').getTime();
            const now = new Date().getTime();
            const timeLeft = weddingDate - now;

            if (timeLeft > 0) {
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = days.toString().padStart(3, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            } else {
                document.getElementById('days').textContent = '000';
                document.getElementById('hours').textContent = '00';
                document.getElementById('minutes').textContent = '00';
                document.getElementById('seconds').textContent = '00';
            }
        }

        // Update countdown immediately and then every second
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Gallery Lightbox
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = lightbox.querySelector('.lightbox-img');
        const lightboxClose = lightbox.querySelector('.lightbox-close');
        document.querySelectorAll('.gallery-item img').forEach(img => {
            img.addEventListener('click', () => {
                lightboxImg.src = img.src;
                lightbox.classList.add('open');
                lightbox.setAttribute('aria-hidden', 'false');
                document.body.style.overflow = 'hidden';
            });
        });
        lightboxClose.addEventListener('click', () => {
            lightbox.classList.remove('open');
            lightbox.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
        });
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) {
                lightboxClose.click();
            }
        });

        // Google Forms submission handling without redirect
        const rsvpForm = document.getElementById('rsvp-form');
        const hiddenIframe = document.getElementById('hidden_iframe');
        const showError = (id, message) => {
            const el = document.getElementById(id);
            if (!el) return;
            el.textContent = message;
            el.hidden = false;
        };
        const hideError = (id) => {
            const el = document.getElementById(id);
            if (!el) return;
            el.hidden = true;
        };
        rsvpForm.addEventListener('submit', function(e) {
            // Client-side validation
            let valid = true;
            const email = document.getElementById('email');
            const guests = document.getElementById('guests');
            const name = document.getElementById('name');
            const honeypot = document.getElementById('confirm_email');
            hideError('error-email');
            hideError('error-guests');
            hideError('error-name');
            email.setAttribute('aria-invalid', 'false');
            guests.setAttribute('aria-invalid', 'false');
            name.setAttribute('aria-invalid', 'false');
            // Honeypot check
            if (honeypot && honeypot.value) {
                e.preventDefault();
                return; // Bot submission
            }
            // Name validation: first and last (at least two words)
            if (!name.value || name.value.trim().split(/\s+/).length < 2) {
                showError('error-name', 'Please enter your first and last name.');
                name.setAttribute('aria-invalid', 'true');
                valid = false;
            }
            if (!email.value || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)) {
                showError('error-email', 'Please enter a valid email address.');
                email.setAttribute('aria-invalid', 'true');
                valid = false;
            }
            if (!guests.value) {
                showError('error-guests', 'Please select the number of guests.');
                guests.setAttribute('aria-invalid', 'true');
                valid = false;
            }
            if (!valid) {
                e.preventDefault();
                return;
            }
            const btn = this.querySelector('.submit-btn');
            const btnText = this.querySelector('.btn-text');
            const btnEmoji = this.querySelector('.btn-emoji');
            const attendance = this.querySelector('input[name="entry.1485655847"]:checked');
            
            // Debug: Log form data to console
            console.log('Form submission data:');
            const formData = new FormData(this);
            for (let [key, value] of formData.entries()) {
                console.log(`${key}: ${value}`);
            }
            
            // Show loading state
            btn.disabled = true;
            btnText.textContent = 'Submitting...';
            btnEmoji.textContent = 'üì§';
            
            // Listen for iframe load event to show success state
            // Save form data locally for prefill next time
            try {
                const snapshot = Object.fromEntries(new FormData(rsvpForm).entries());
                localStorage.setItem('rsvp_snapshot', JSON.stringify(snapshot));
            } catch (_) {}

            // Timeout fallback in case Google doesn't return quickly
            const timeoutId = setTimeout(() => {
                btn.disabled = false;
                btnText.textContent = 'Try Again';
                btnEmoji.textContent = '‚ö†Ô∏è';
                const err = document.querySelector('.form-error');
                if (err) {
                    err.hidden = false;
                    err.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }, 6000);

            const onDone = () => {
                clearTimeout(timeoutId);
                btn.style.background = '#4CAF50';
                btn.style.borderColor = '#4CAF50';
                btnText.textContent = 'Thank you!';
                btnEmoji.textContent = '‚úÖ';
                
                // Show success message
                const success = document.querySelector('.form-success');
                const successEmoji = document.querySelector('.success-emoji');
                
                if (attendance && attendance.value === 'YES') {
                    successEmoji.textContent = 'üéâ';
                    success.innerHTML = '<span class="success-emoji">üéâ</span>We\'re so excited to celebrate with you! Your RSVP has been submitted.';
                } else {
                    successEmoji.textContent = 'üíô';
                    success.innerHTML = '<span class="success-emoji">üíô</span>Thank you for letting us know. We\'ll miss you! Your response has been submitted.';
                }
                
                success.hidden = false;
                success.scrollIntoView({ behavior: 'smooth', block: 'center' });
                // Show modal
                const modal = document.getElementById('rsvp-modal');
                const closeBtn = document.getElementById('rsvp-modal-close');
                modal.classList.add('open');
                modal.setAttribute('aria-hidden', 'false');
                const closeModal = () => {
                    modal.classList.remove('open');
                    modal.setAttribute('aria-hidden', 'true');
                    modal.removeEventListener('click', backdropHandler);
                    closeBtn.removeEventListener('click', closeModal);
                };
                const backdropHandler = (evt) => { if (evt.target === modal) closeModal(); };
                closeBtn.addEventListener('click', closeModal);
                modal.addEventListener('click', backdropHandler);
                hiddenIframe.removeEventListener('load', onDone);
            };
            hiddenIframe.addEventListener('load', onDone);
        });

        // Prefill from localStorage if available
        try {
            const saved = localStorage.getItem('rsvp_snapshot');
            if (saved) {
                const data = JSON.parse(saved);
                if (data['entry.671845706']) document.getElementById('name').value = data['entry.671845706'];
                if (data['entry.123456789']) document.getElementById('email').value = data['entry.123456789'];
                if (data['entry.1893890701']) document.getElementById('guests').value = data['entry.1893890701'];
            }
        } catch (_) {}

        // Modal a11y: Escape to close, focus trap
        (function(){
            const modal = document.getElementById('rsvp-modal');
            const closeBtn = document.getElementById('rsvp-modal-close');
            if (!modal || !closeBtn) return;
            const focusableSel = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
            const trap = (e) => {
                if (modal.getAttribute('aria-hidden') === 'true') return;
                if (e.key === 'Escape') {
                    closeBtn.click();
                    return;
                }
                if (e.key !== 'Tab') return;
                const focusables = modal.querySelectorAll(focusableSel);
                if (!focusables.length) return;
                const first = focusables[0];
                const last = focusables[focusables.length - 1];
                if (e.shiftKey && document.activeElement === first) {
                    e.preventDefault(); last.focus();
                } else if (!e.shiftKey && document.activeElement === last) {
                    e.preventDefault(); first.focus();
                }
            };
            document.addEventListener('keydown', trap);
        })();

        // Optional Apps Script webhook (set your URL to enable)
        const APPS_SCRIPT_WEBHOOK_URL = '';
        if (APPS_SCRIPT_WEBHOOK_URL) {
            rsvpForm.addEventListener('submit', () => {
                try {
                    const payload = Object.fromEntries(new FormData(rsvpForm).entries());
                    navigator.sendBeacon(APPS_SCRIPT_WEBHOOK_URL, JSON.stringify(payload));
                } catch (_) {}
            });
        }

        // Add visual feedback when radio options are selected
        document.querySelectorAll('input[name="entry.1485655847"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const label = this.closest('.radio-label');
                const allLabels = document.querySelectorAll('.radio-label');
                
                // Remove selected state from all labels
                allLabels.forEach(l => {
                    l.classList.remove('selected');
                    l.style.background = '#FAFAFA';
                    l.style.borderColor = '#E0E0E0';
                });
                
                // Add selected state to current label
                label.classList.add('selected');
                label.style.background = '#F0F8F0';
                label.style.borderColor = '#4CAF50';
                
                // Show emoji feedback immediately on mobile
                const emoji = label.querySelector('.emoji-feedback');
                emoji.style.opacity = '1';
                emoji.style.transform = 'translateY(-50%) scale(1.2)';
                
                // Add haptic feedback on mobile devices
                if ('vibrate' in navigator) {
                    navigator.vibrate(50); // Short vibration
                }
            });
        });

        // Add touch feedback for mobile devices
        document.querySelectorAll('.radio-label').forEach(label => {
            label.addEventListener('touchstart', function() {
                this.style.transform = 'scale(0.98)';
            });
            
            label.addEventListener('touchend', function() {
                this.style.transform = 'scale(1)';
            });
        });

        // Mobile menu toggle functionality
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        
        if (mobileMenuToggle && navLinks) {
            mobileMenuToggle.addEventListener('click', function() {
                this.classList.toggle('active');
                navLinks.classList.toggle('active');
            });
            
            // Close menu when clicking on a nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function() {
                    mobileMenuToggle.classList.remove('active');
                    navLinks.classList.remove('active');
                });
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!mobileMenuToggle.contains(e.target) && !navLinks.contains(e.target)) {
                    mobileMenuToggle.classList.remove('active');
                    navLinks.classList.remove('active');
                }
            });
        }

        // FAQ accordion
        document.querySelectorAll('.faq-item').forEach(btn => {
            btn.addEventListener('click', () => {
                const expanded = btn.getAttribute('aria-expanded') === 'true';
                btn.setAttribute('aria-expanded', String(!expanded));
                const content = btn.nextElementSibling;
                const icon = btn.querySelector('.faq-icon');
                if (expanded) {
                    content.hidden = true;
                    icon.textContent = '+';
                } else {
                    content.hidden = false;
                    icon.textContent = '‚àí';
                }
            });
        });

        // Music toggle
        (function() {
            const audio = document.getElementById('bg-audio');
            const toggle = document.getElementById('music-toggle');
            if (!audio || !toggle) return;
            let isPlaying = false;
            let userInteracted = false;
            const PREF_KEY = 'music_pref_enabled';
            
            // Try to start music on any early user interaction
            const tryStartMusic = async () => {
                if (userInteracted || isPlaying) return;
                try {
                    audio.volume = 0.5;
                    await audio.play();
                    setState(true);
                    userInteracted = true;
                    console.log('Music started on early user interaction');
                } catch (e) {
                    console.log('Early music start failed:', e);
                }
            };
            
            // Listen for any user interaction immediately
            document.addEventListener('click', tryStartMusic, { once: true, passive: true });
            document.addEventListener('touchstart', tryStartMusic, { once: true, passive: true });
            document.addEventListener('keydown', tryStartMusic, { once: true });

            function setState(playing) {
                isPlaying = playing;
                toggle.classList.toggle('active', playing);
                toggle.setAttribute('aria-pressed', String(playing));
                toggle.textContent = playing ? '‚ùö‚ùö' : '‚ô™';
                try { localStorage.setItem(PREF_KEY, playing ? '1' : '0'); } catch (_) {}
            }

            // Handle audio loading
            audio.addEventListener('loadeddata', () => {
                console.log('Audio loaded successfully');
            });

            audio.addEventListener('canplay', () => {
                console.log('Audio can play');
            });

            audio.addEventListener('error', (e) => {
                console.error('Audio loading error:', e);
                console.error('Audio error details:', {
                    error: audio.error,
                    networkState: audio.networkState,
                    readyState: audio.readyState
                });
                toggle.textContent = 'üîá';
                toggle.title = 'Audio file not found';
            });

            // Handle audio end (for non-looping scenarios)
            audio.addEventListener('ended', () => {
                if (isPlaying) {
                    setState(false);
                }
            });

            toggle.addEventListener('click', async () => {
                try {
                    if (!isPlaying) {
                        // Set volume and play
                        audio.volume = 0.5;
                        await audio.play();
                        setState(true);
                        userInteracted = true;
                        console.log('Music started via toggle button');
                    } else {
                        audio.pause();
                        setState(false);
                        console.log('Music paused via toggle button');
                    }
                } catch (err) {
                    console.warn('Audio playback failed:', err);
                    if (!userInteracted) {
                        // First interaction - show helpful message
                        alert('Click the music button to enable audio playback. Some browsers require user interaction before playing audio.');
                        userInteracted = true;
                    } else {
                        // Subsequent failures - show error
                        toggle.textContent = 'üîá';
                        toggle.title = 'Audio playback failed';
                    }
                }
            });

            // Pause audio when page becomes hidden
            document.addEventListener('visibilitychange', () => {
                if (document.hidden && isPlaying) {
                    audio.pause();
                    setState(false);
                }
            });

            // Handle page unload
            window.addEventListener('beforeunload', () => {
                if (isPlaying) {
                    audio.pause();
                }
            });

            // Attempt autoplay respecting prior user preference
            (async function initAutoplay() {
                // Wait a bit for the audio element to be ready
                await new Promise(resolve => setTimeout(resolve, 100));
                
                try {
                    const pref = localStorage.getItem(PREF_KEY);
                    if (pref === '0') return; // user opted out
                    
                    // Set volume and try to play immediately
                    audio.volume = 0.35;
                    await audio.play();
                    setState(true);
                    console.log('Music started automatically');
                } catch (err) {
                    console.log('Autoplay blocked, waiting for user interaction');
                    // Show a subtle hint to the user
                    toggle.title = 'Click to start music';
                    toggle.style.animation = 'pulse 2s infinite';
                    
                    // Fallback: start on first user gesture anywhere
                    const resume = async () => {
                        try {
                            audio.volume = 0.5;
                            await audio.play();
                            setState(true);
                            userInteracted = true;
                            console.log('Music started on user interaction');
                            toggle.style.animation = '';
                            window.removeEventListener('pointerdown', resume);
                            window.removeEventListener('keydown', resume);
                            window.removeEventListener('click', resume);
                            window.removeEventListener('touchstart', resume);
                        } catch (e) {
                            console.warn('Failed to start music on interaction:', e);
                        }
                    };
                    window.addEventListener('pointerdown', resume, { once: true, passive: true });
                    window.addEventListener('keydown', resume, { once: true });
                    window.addEventListener('click', resume, { once: true, passive: true });
                    window.addEventListener('touchstart', resume, { once: true, passive: true });
                }
            })();
        })();
    </script>
</body>
</html>
